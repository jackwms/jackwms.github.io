{"meta":{"title":"my lover","subtitle":null,"description":null,"author":"szl and wmm","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"2018.9.25","slug":"hello-world","date":"2018-09-20T17:06:28.799Z","updated":"2018-09-24T13:12:49.053Z","comments":true,"path":"2018/09/21/hello-world/","link":"","permalink":"http://yoursite.com/2018/09/21/hello-world/","excerpt":"","text":"Geth创建私链创建一个genesis.json文件1234567891011121314151617&#123; &quot;config&quot;: &#123; &quot;chainId&quot;: 110, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 &#125;, &quot;alloc&quot; : &#123;&#125;, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x07000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;&#125; 参数 描述 mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的黄皮书描述条件 nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的黄皮书描述的条件 difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase 矿工的账号，随便填 timestamp 设置创世块的时间戳 parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 extraData 附加信息，随便填，可以填你的个性信息 gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和。 将genesis.json拷贝至任意目录命令行环境执行初始化命令 创建私有链 geth –datadir .\\persondata\\ init .\\persondata\\genesis.json 登陆私有链 geth –datadir .\\persondata\\ –networkid 110 console init 是初始化创世区块的，如果已经初始化了，这个命令不需要执行，只需要执行第二条。datadir是表示当前区块链网络存储的位置。networkId：表示目前私链网络Id，这个ID是唯一标识，需要注意。 如上图，当执行完以上命令后，会出现两个目录： Geth目录：用于保存该链上geth保存的该链上的区块数据 keystore目录：保存的该链上的用户信息 账户操作 操作 命令 创建一个账户 personal.newAccount(“123456”) ，输入参数就是密码，账户地址保存在keystore目录下 。 查询账户信息 personal.listAccounts ，读取的是本地keystore目录下的账户地址信息 查看连接状态 net.listening ，查看当前连接状态信息 查看对等节点连接数量 net.peerCount 查看所连接的私有链 net.version 查看自己的Enode admin.nodeInfo ,把自己的Enode暴露出去，可以让别人添加你的节点，让别人连入你搭建的私有链网络 查看自己连接的节点 admin.peers ,这个命令可以查看自己连接了那些对端节点，这里仅仅是网络自发现的节点。 添加别人的节点 admin.addPeer(“enode://xxx@ip:port”) , admin.nodeInfo可以看字enode信息格式 启动挖矿 miner.start(x) ,x是启动几个核心来挖矿 停止挖矿 miner.stop() ，另外一种方法就是直接关掉当前geth的进程 查看挖矿账余额 eth.getBalance(eth.accounts[0]) ，默认的挖矿账户是当前账户列表中的第一个 余额转换 web3.fromWei(eth.getBalance(eth.accounts[0]),’ether’) 设置挖矿账户 miner.setEtherbase(eth.accounts[1]) ,设置挖矿账户 成功挖到一次矿后就停止 miner.start(1);admin.sleepBlocks(1);miner.stop() 查看转账交易 eth.getTransaction(“xxxx”),参数为交易返回hash 查看区块信息 eth.getBlock(22) ，入参是区块号 报错问题：使用geth启动在私有链环境下，提示如下问题： 原因是当前环境没有账户，需要建立一个账户eth.newAccount 返回null , 此时启动miner.start() 会出现此问题 解决：personal.newAccount(“xxx”), 这里创建一个新账户。 智能合约的部署和调用配置静态节点Geth支持一个叫静态节点的特征，如果有特定的端点，想一直与静态节点连接，如果断开连接，静态节点回再次连接。你可以配置永久静态节点，方法是将如下所说的放进/personData/Geth/static-nodes.json（这应该是和chaindata以及keystone在同一个文件夹）。出处link datadir rpc rpcapi networkid 还有一些挖矿相关的 –rpcapi “db,eth,net,web3,personal” 重要信息：请注意在RPC/IPC界面提供API，会使每个可以进入这个界面（例如dapp’s）的人都有权限访问这个API。注意你激活的是哪个API。Geth会默认激活IPC界面上所有的API，以及RPC界面上的db,eth,net和web3 API。 -rpc开启HTTP JSON-RPC` –networkid value网络标识符(整型, 1=Frontier, 2=Morden (弃用), 3=Ropsten, 4=Rinkeby) (默认: 1)","categories":[],"tags":[]}]}